# DIABLO_2_BOT

> Автономный десктоп-бот на C++ для анализа мини-карты и навигации в игровом клиенте.

---

![Language](https://img.shields.io/badge/C%2B%2B-100%25-blue) ![License](https://img.shields.io/badge/License-MIT-lightgrey) ![Status](https://img.shields.io/badge/Status-Experimental-orange)

> **Кратко:** проект демонстрирует реализацию полного цикла: захват кадров из окна приложения → предобработка и детекция с помощью OpenCV → логика зон/навигации → эмуляция действий через WinAPI. Опционально — ускорение «горячих» вычислений через CUDA (интеграция через CMake).

---

## Содержание

* [Функциональность](#функциональность)
* [Технологии](#технологии)
* [Архитектура](#архитектура)
* [Установка и сборка](#установка-и-сборка)
* [Запуск](#запуск)
* [Настройки](#настройки)
* [Производительность и оптимизации](#производительность-и-оптимизации)
* [Limitations & Этические заметки](#limitations--этические-заметки)
* [Roadmap / План развития](#roadmap--план-развития)
* [Как внести вклад](#как-внести-вклад)
* [Лицензия](#лицензия)
* [Контакты](#контакты)

---

## Функциональность

* Захват изображения из окна приложения (WinAPI).
* Предобработка кадров (фильтрация, пороговая бинаризация, морфология).
* Детекция объектов / шаблонов на мини-карте с использованием OpenCV (контуры, шаблонный матчинг и др.).
* Логика зон и навигации (MinimapNavigator, BaseZone) — принятие решений на основе состояния сцены.
* Визуализация результатов в отдельном окне / логирование действий.
* Опциональная поддержка CUDA для ускорения тяжёлых шагов обработки.

---

## Технологии

* Язык: **C++17 / C++20** (STL)
* CV: **OpenCV**
* YOLOv5
* WinAPI: низкоуровневое взаимодействие с окном, эмуляция ввода
* Сборка: **CMake**, Visual Studio (.sln)
* Опционально: **CUDA** (через CMake-флаг)
* Контроль версий: **Git**

---

## Архитектура

Проект построен модульно, чтобы было проще тестировать и расширять:

* `main.cpp` — точка входа, конфигурация и orchestration модулей.
* `MinimapNavigator.*` — логика работы с мини-картой: обнаружение, трекинг целей, принятие навигационных решений.
* `BaseZone.*` — описание зон/состояний и переходов между ними.
* `Tools/*` — утилитарные функции: захват экрана, обработка изображений, логирование.
* `CMakeLists.txt` — скрипты сборки и опциональные флаги (например, `WITH_CUDA`).

---

## Установка и сборка

> Инструкции ориентированы на Windows (Visual Studio + CMake). Для Linux требуется адаптация WinAPI-захвата.

### Предварительные требования

* Visual Studio 2019/2022 с компонентами C++
* CMake >= 3.18
* OpenCV (собранный для выбранной конфигурации) — укажите путь при конфигурации CMake
* CUDA Toolkit (при включении `WITH_CUDA`) — совместимая версия с вашим компилятором
* Git

### Быстрая сборка (CMake + Visual Studio)

```powershell
git clone https://github.com/KAfus1231/DIABLO_2_BOT.git
cd DIABLO_2_BOT
mkdir build && cd build
cmake .. -G "Visual Studio 16 2019" -A x64 -DOpenCV_DIR="C:/path/to/opencv/build" -DWITH_CUDA=OFF
cmake --build . --config Release
```

> Для включения CUDA: `-DWITH_CUDA=ON` и убедитесь, что `CUDA_TOOLKIT_ROOT_DIR` корректен. При проблемах со сборкой проще открыть уже сгенерированный `.sln` в Visual Studio и собрать оттуда.

### Альтернатива: открыть `D2Rbot.sln`

В корне репозитория может находиться готовое решение `D2Rbot.sln` — откройте его в Visual Studio и соберите конфигурацию Debug/Release.

---

## Запуск

1. Убедитесь, что игра запущена и видима системе (в окне, не в эксклюзивном режиме, если используется захват окна).
2. Запустите `D2Rbot.exe` (или соответствующий исполняемый файл из `build/Release`).
3. В GUI/конфиге укажите режим работы (демонстрация / реальный режим), параметры конфигурации и уровни логирования.

Пример запуска из командной строки:

```cmd
build\Release\D2Rbot.exe --config ..\config\default.yaml
```


---

## Настройки

Проект использует конфигурационные файлы (yaml/json/ini) для:

* Порогов детекции
* Координат/масок мини-карты
* Поведенческих стратегий навигации
* Флагов отладки и логирования

> Добавьте шаблон `config/default.yaml` в репозиторий, чтобы новые пользователи могли быстро стартовать.

---

## Производительность и оптимизации

* Рекомендуется запуск в Release-конфигурации.
* Профилирование горячих путей — используйте `Visual Studio Profiler`, `Windows Performance Analyzer` или `perf`/`Valgrind` на Linux (при портировании).
* В проекте заложена площадка для переноса тяжёлых операций на CUDA — включайте `WITH_CUDA` только при наличии корректного CUDA-Toolchain.
* Для минимизации задержек: уменьшайте разрешение обрабатываемых областей, используйте region-of-interest (ROI) вместо полного кадра, распараллеливайте обработку и уменьшайте аллокации в горячих циклах.

---

## Limitations & Этические заметки

* Проект предназначен как демонстрация технических навыков: обработки изображений, интеграции с WinAPI и оптимизаций. Любые попытки использования бота для обхода правил сторонних сервисов/игр находятся вне ответственности автора.
* Для коммерческого или публичного использования убедитесь в соблюдении лицензионных соглашений и прав разработчиков целевых приложений.

---

---

*Если хотите — могу подготовить английскую версию README или добавить готовые GIF/скриншоты и точные команды запуска, если скажете, какие файлы/аргументы у вас есть.*
